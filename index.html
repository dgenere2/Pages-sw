<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title >Report@Appgro</title>
<link rel="manifest" href="./manifest.json">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="stylesheet" href="css/estilos.css" />
</head>
<body>
<header class="app-bar">
  <div class="left-group">
    <button id="menu-toggle" class="menu-btn">&#9776;</button>
    <h1 class="title">Report@ Agro</h1>
  </div>

  <div class="right-group">
    <div id="boton-login"></div>
    <div id="resultado"></div>
    <button id="logout" style="display:none;">Cerrar sesiÃ³n</button>
  </div>
</header>



  <nav id="sidebar">
    <ul>
      <li><a onclick="verOption('forma-inicio')"><span>ğŸ </span> Inicio</a></li>
      <li><a onclick="verOption('forma-recibos');"><span>ğŸ“„</span> FacturaciÃ³n</a></li>
      <li><a onclick="verOption('forma-consulta')"><span>â„¹ï¸</span> Consultas</a></li>
      <li><a onclick="window.location.reload()"><span>ğŸ”„</span> Actualizar</a></li>
    </ul>
  </nav>

 <div id="update-alert" style="display:none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
background: #333; color: #fff; padding: 10px 20px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); z-index: 9999;">
  Nueva versiÃ³n disponible. <button onclick="window.location.reload()" style="margin-left:10px; background:#4CAF50; color:white; border:none; padding:5px 10px; border-radius:4px;">Actualizar</button>
</div>
  
  <div id="overlay"></div>

  <div id="forma-inicio">
   <main>
    <section class="content">
      <h2>Inicio</h2>
      <p>Bienvenido.</p>
    </section>
  </main>

<div class="menu-inicio">
  <p>Seleccione una opciÃ³n para comenzar:</p>
  <div class="opciones-menu">
    <button onclick="verOption('forma-recibos')">ğŸ§¾ Registrar Factura</button>
    <button onclick="verOption('forma-consulta')">ğŸ” Consultar Facturas</button>
    <button hidden onclick="verOption('forma-clientes')">ğŸ‘¥ Clientes</button>
    <button hidden onclick="verOption('forma-configuracion')">âš™ï¸ ConfiguraciÃ³n</button>
    <button hidden onclick="cerrarSesion()">ğŸšª Cerrar SesiÃ³n</button>
  </div>
</div>


  </div>

<div id="forma-recibos" style="display: none;">
  <main>
    <section class="content">
      <h2>FacturaciÃ³n</h2>
      <p>Ingrese los datos para facturar.</p>

      <!-- BotÃ³n para volver al inicio -->
      <button onclick="verOption('forma-inicio')" class="btn-volver">ğŸ  Inicio</button>
    </section>
  </main>

  <!-- FORMULARIO -->
<form id="formulario" class="formulario">
  <label for="cliente">Cliente</label>
  <input type="text" id="cliente" class="requerido" required />

  <label for="fecha">Fecha</label>
  <input type="date" class="requerido" id="fecha" required />

  <label for="quintal">Precio quintal</label>
  <input oninput = "calcularMonto()" class="requerido" type="number" id="quintal" step="0.01" required />

   <label for="peso">Peso kilo</label>
  <input  oninput = "calcularMonto()" class="requerido" type="number" id="peso" step="0.01" class="requerido" required />
  <select id="medida" hidden>
  </select>

  <label for="unitario">Precio kilo</label>
  <input oninput = "calcularMonto()"  readonly type="number" id="unitario" step="0.01" required />

  <label for="servicio">Concepto</label>
    <select id="servicio" class="requerido" required >
      <option></option>
  </select>

    <label for="comentario">Comentario o detalle (opcional)</label>
  <textarea id="comentario" ></textarea>

  <label for="monto">Monto (RD$)</label>
  <input readonly type="number" id="monto" step="0.01" required />

  <button type="submit">Generar Recibo</button>
</form>

  <div id="boton-login"></div>
    <div id="resultado"></div>

<!-- RECIBO --> 
<div id="recibo" class="recibo-flotante" style="display:none;">
  <button class="cerrar-recibo" onclick="document.getElementById('recibo').style.display='none'">âœ–</button>

  <h2 id="r-negocio"></h2>
  <h5 id="r-descipcion"></h5>
  <h3 id="r-documento"></h3>
  <p><strong>No. recibo:</strong> <span id="r-factura"></span></p>
  <p><strong>Cliente:</strong> <span id="r-cliente"></span></p>
  <p><strong>Fecha:</strong> <span id="r-fecha"></span></p>
  <p><strong>Peso:</strong><span id="r-peso"></span><span id="r-medida"></span></p>
  <p><strong id="r-label"></strong><strong>:</strong><span id="r-punitario"></span></p>
  <p><strong>Concepto:</strong> <span id="r-servicio"></span></p>
  <p><strong>Monto:</strong> RD$ <span id="r-monto"></span></p>
  <hr />
  <p>Gracias por su preferencia.</p>
  <button class="btn-imprimir" onclick="imprimirRecibo()">ğŸ–¨ï¸ Imprimir</button>
</div>




  <div id="forma-consulta" style="display: none;">
  <main>
    <section class="content">
      <h2>Consulta de facturas</h2>
      <p>Ingrese los datos consultar facturas.</p>

      <!-- BotÃ³n para volver al inicio -->
      <button onclick="verOption('forma-inicio')" class="btn-volver">ğŸ  Inicio</button>
    </section>
  </main>

<div class="filtros">
  <input type="text" id="filtroFactura" placeholder="NÂ° Factura">
  <input type="text" id="filtroCliente" placeholder="Cliente">
  <input type="text" id="filtroServicio" placeholder="Concepto.">
  <label for="filtroFechaDesde">Desde</label>
  <input type="date" id="filtroFechaDesde" aria-label="Desde" title="Desde">
  <label for="filtroFechaHasta">Hasta</label>
  <input type="date" id="filtroFechaHasta" aria-label="Hasta" title="Hasta">
  <button onclick="filtrarTabla()">ğŸ” Buscar</button>
  <button onclick="limpiarFiltros()">ğŸ§¹ Limpiar</button>
</div>


 <div class="exportar">
    <button onclick="exportarExcel()">ğŸ“Š Exportar Excel</button>
    <button onclick="exportarPDF()">ğŸ“„ Exportar PDF</button>
  </div>

<div class="table-container" id="tablaFacturas">
    <table>
      <thead>
        <tr>
          <th>NÂ° Factura</th>
          <th>Cliente</th>
          <th>Fecha</th>
          <th>Concepto</th>
          <th>Kilos</th>
          <th>P. Quintal</th>
          <th>P. Kilo</th>
          <th>Monto</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="4">Total</td>
          <td colspan="3" id="total-cant">0.00</td>
          <td id="total-monto">0.00</td>
          </tr>
      </tfoot>
    </table>
  </div>
  </div>









  <div class="g_id_signin" data-type="standard"></div>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <!-- Exportar Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<!-- Exportar PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script src="js/app.js"></script>
</body>
</html>
